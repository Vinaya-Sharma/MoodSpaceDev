(()=>{var e,t={9864:(e,t,a)=>{"use strict";var n=a(7294),o=a(745),l=(a(5835),a(3977)),r=a(909);const s=({year:e,month:t,moodByDay:a,setMoodByDay:o,selectedDay:l,setMood:r})=>n.createElement("div",{className:"flex flex-wrap px-2 font-serif w-full justify-between items-center gap-4"},[{emoji:"ðŸ˜£",text:"rotten",color:"red-500"},{emoji:"ðŸ˜”",text:"bummy",color:"orange-500"},{emoji:"ðŸ˜",text:"okey",color:"teal-500"},{emoji:"ðŸ˜Š",text:"nicee",color:"blue-500"},{emoji:"ðŸ¤©",text:"ahhh",color:"violet-900"}].map((s=>n.createElement("div",{key:s.emoji,className:"flex justify-center items-center flex-col"},n.createElement("div",{className:"w-8 h-8 rounded-full flex flex-col items-center place-items-center justify-center cursor-pointer transition-all "+(a[`${e}-${t+1}-${l}`]===s.emoji?"bg-teel":"bg-gray-200 "),onClick:()=>{const n=Object.assign({},a);n[`${e}-${t+1}-${l}`]=s.emoji,o(n),r(!1)}},n.createElement("span",{className:"text-xl"},s.emoji)),n.createElement("span",{className:`font-bold text-xs text-${s.color}`},s.text),n.createElement("span",{className:"text-red-500"}),n.createElement("span",{className:"text-orange-500"}," "),n.createElement("span",{className:"text-green-500"}," "),n.createElement("span",{className:"text-teal-500"}," "),n.createElement("span",{className:"text-blue-500"}," "),n.createElement("span",{className:"text-violet-900"}," ")))));var c=a(4051),i=a(9583);const m=({selectedDay:e,setMood:t,year:a,month:o,setSelectedDay:l,user:r,db:s})=>{const[m,d]=(0,n.useState)([]),[u,y]=(0,n.useState)([]);return(0,n.useEffect)((()=>{var t,n,l,i;t=void 0,n=void 0,i=function*(){const t=(0,c.JU)(s,"users",r.email),n=yield(0,c.QT)(t);if(n.exists()){const t=n.data().moodReasons;console.log("Document data:",t),t&&(d(t),console.log(t[`${a}-${o+1}-${e}`]),console.log(a,o,e),y(t[`${a}-${o+1}-${e}`]?t[`${a}-${o+1}-${e}`]:[]))}else console.log("No such document!")},new((l=void 0)||(l=Promise))((function(e,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function r(e){try{s(i.throw(e))}catch(e){a(e)}}function s(t){var a;t.done?e(t.value):(a=t.value,a instanceof l?a:new l((function(e){e(a)}))).then(o,r)}s((i=i.apply(t,n||[])).next())}))}),[]),n.createElement("div",{className:"bg-white rounded-lg p-4 font-serif"},n.createElement("h3",{className:"text-[16px] mb-4 font-bold"},"What made you feel this way"),n.createElement("div",{className:"flex flex-wrap justify-center"},["Food","Sleep","Exercise","Family","Partner","Social Media","Friends","Events","School","Work","Money","Pets","Hobbies","Music"].map((e=>n.createElement("button",{key:e,className:"w-auto justify-center h-6 m-1 py-1 px-2 text-xs rounded-full "+(u.includes(e)?"bg-teel text-white":"bg-gray-200 text-gray-800"),onClick:()=>(e=>{u.includes(e)?y(u.filter((t=>t!==e))):y([...u,e])})(e)},e)))),n.createElement("div",{className:"flex place-items-center justify-between mt-4"},n.createElement(i.x_l,{className:"text-teel hover:text-teal-600 text-lg ",onClick:()=>{t(!0)}}),n.createElement("button",{className:"bg-teel hover:bg-teal-600 text-white py-2 px-4 rounded-lg",onClick:()=>{const n=Object.assign({},m);n[`${a}-${o+1}-${e}`]=u;const i=(0,c.JU)(s,"users",r.email);(0,c.pl)(i,{moodReasons:n},{merge:!0}),l(null),t(!0)}},"Save")))},d=({year:e,month:t,moodByDay:a,setMoodByDay:o,db:l,user:r})=>{const c=new Date(e,t,1).getDay(),i=new Date(e,t+1,0).getDate(),d=Array.from({length:i},((e,t)=>t+1)),[u,y]=(0,n.useState)(null),[f,p]=(0,n.useState)(!0),g=new Date,h=[{emoji:"ðŸ¤©",text:"ahhh",color:"violet-300"},{emoji:"ðŸ˜Š",text:"nicee",color:"blue-300"},{emoji:"ðŸ˜",text:"okey",color:"teal-300"},{emoji:"ðŸ˜”",text:"bummy",color:"orange-300"},{emoji:"ðŸ˜£",text:"rotten",color:"red-300"}],x=a=>e===g.getFullYear()&&t===g.getMonth()&&a===g.getDate();return n.createElement("div",{className:"grid w-80 grid-cols-7 gap-2 text-center"},["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((e=>n.createElement("div",{key:e,className:"text-gray-700 font-medium"},e))),Array.from({length:c},((e,t)=>n.createElement("div",{key:`pre_${t}`,className:"text-gray-300"},""))),d.map((o=>n.createElement("div",{key:o,className:"flex flex-col items-center justify-center "+(u===o?"bg-gray-200":""),onClick:()=>(e=>{y(e)})(o),style:{cursor:"pointer"}},(o=>{if(a.hasOwnProperty(`${e}-${t+1}-${o}`)){const l=a[`${e}-${t+1}-${o}`],r=h.find((e=>e.emoji===l));return n.createElement("div",null," ",n.createElement("div",{className:`w-6 h-6 rounded-full bg-${r.color} flex items-center justify-center text-xl`,style:{cursor:"pointer"}},a[`${e}-${t+1}-${o}`]),n.createElement("span",{className:"text-xs"},o))}return null})(o)||n.createElement("div",null,n.createElement("div",{className:`w-6 h-6 rounded-full ${x(o)?"bg-teel":"bg-gray-300"} `,onClick:()=>y(o),style:{cursor:"pointer"}}),n.createElement("span",{className:"text-xs"},o))))),null!==u&&n.createElement("div",{key:`popup_${u}`,className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",style:{zIndex:9999},onClick:e=>{e.target===e.currentTarget&&y(null)}},n.createElement("div",{className:"bg-white rounded-lg w-80 p-4 flex flex-col"},f?x(u)?n.createElement(s,{year:e,month:t,moodByDay:a,setMoodByDay:o,selectedDay:u,setMood:p}):n.createElement("div",null," ",n.createElement("h1",{className:"font-bold"},"Oopsie! Looks like you're a time traveler. ðŸª„"),n.createElement("h1",{className:"underline"},`You can't track your mood for a day ${e<g.getFullYear()||t<g.getMonth()||u<g.getDate()?"from the past!":"that hasn't happened yet!"}\n                      `),n.createElement("h1",{className:"mt-2"},"Come back tomorrow and don't miss a day, I want to hear all about how you're feeling! ðŸš€ðŸ•°ï¸ðŸ‘‹")):n.createElement(m,{selectedDay:u,setMood:p,year:e,month:t,setSelectedDay:y,user:r,db:l})),n.createElement("span",{className:"bg-red-300"}),n.createElement("span",{className:"bg-orange-300"}," "),n.createElement("span",{className:"bg-green-300"}," "),n.createElement("span",{className:"bg-teal-300"}," "),n.createElement("span",{className:"bg-blue-300"}," "),n.createElement("span",{className:"bg-violet-300"}," ")))};var u=function(e,t,a,n){return new(a||(a=Promise))((function(o,l){function r(e){try{c(n.next(e))}catch(e){l(e)}}function s(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,s)}c((n=n.apply(e,t||[])).next())}))};const y=({db:e,user:t})=>{const[a,o]=(0,n.useState)((new Date).getFullYear()),[l,r]=(0,n.useState)((new Date).getMonth()),[s,i]=(0,n.useState)({}),[m,y]=(0,n.useState)("");return(0,n.useEffect)((()=>{const a=(0,c.hJ)(e,"users",t.email,"moodByDay"),n=(0,c.cf)(a,(t=>{const a={};t.forEach((e=>{const t=e.id,n=e.data();a[t]=n.emoji})),i(a),u(void 0,void 0,void 0,(function*(){const t=(0,c.JU)(e,"message","message"),a=(yield(0,c.QT)(t)).data().text;y(a||"")}))}));return n}),[t,e]),(0,n.useEffect)((()=>{u(void 0,void 0,void 0,(function*(){try{const a=(0,c.qs)(e);Object.keys(s).forEach((n=>{const o=(0,c.JU)(e,"users",t.email,"moodByDay",n);a.set(o,{emoji:s[n]})})),yield a.commit()}catch(e){console.error("Error adding documents: ",e)}}))}),[s]),n.createElement("div",{className:"justify-center font-serif w-80 h-[475px]"},m&&n.createElement("div",{className:"p-2 mb-4 bg-teel bg-opacity-40  rounded-lg"},m),n.createElement("div",{className:"flex justify-between items-center mb-4"},n.createElement("div",null," ",n.createElement("h2",{className:"text-2xl font-medium font-serif text-teal"},new Date(a,l).toLocaleDateString("en-US",{month:"long",year:"numeric"})),n.createElement("h1",{className:"text-xs mt-1 font-bold max-w-[225px]"},"Log Feelings Once Daily!")),n.createElement("div",null,n.createElement("button",{className:"bg-teel rounded-full px-3 py-1 mr-2 text-white hover:bg-opacity-80 transition-colors",onClick:()=>{0===l?(r(11),o(a-1)):r(l-1)}},"<"),n.createElement("button",{className:"bg-teel rounded-full px-3 py-1 text-white hover:bg-opacity-80 transition-colors",onClick:()=>{11===l?(r(0),o(a+1)):r(l+1)}},">"))),n.createElement(d,{year:a,month:l,moodByDay:s,setMoodByDay:i,db:e,user:t}))};var f=a(6695),p=a(1354),g=a.n(p);const h=({currentDay:e,setAccess:t,setJournalByDay:a,journalByDay:o,user:l,db:r,selectedMember:s,setSelectedMember:m,code:d,setCode:u,members:y,setMembers:p,groupExists:h,setGroupExists:x,loading:b,journalInput:v,setJournalInput:E,setLoading:w,getjournaldata:N,usePassword:k,access:j})=>{var M;const S=(0,n.useRef)(null),[D,C]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{E(o[(0,f.Z)(e,"yyyy-MM-dd")]?o[(0,f.Z)(e,"yyyy-MM-dd")].content:"")}),[e]),(0,n.useEffect)((()=>{m(l.email)}),[]),n.createElement("div",{className:"pb-14 pt-[.3px]"},d&&h&&n.createElement("div",null,n.createElement("div",{className:"flex items-center  my-2"},n.createElement("label",{htmlFor:"group-member-select",className:"w-32 mr-2"},"Intentions for:"),n.createElement("select",{id:"group-member-select",ref:S,onChange:e=>{m(e.target.value),console.log("changeddd member")},className:"p-2 w-full rounded border border-gray-200 outline-none"},n.createElement("option",{value:l.email},"meee!"),y.map((e=>{if(e.showJournals)return n.createElement("option",{key:e.email,value:e.email},e.name)})))),n.createElement("hr",{className:"py-2"})),n.createElement("div",null,n.createElement("textarea",{disabled:s!=l.email,className:"py-4 shadow appearance-none border border-gray-200 min-h-[250px] text-left rounded px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline w-full",id:"journal-input",placeholder:s==l.email?"Write your journal here...\n\nThis can be a daily reflection, summary of your day, or any thoughts you just want to note down :)":"\nNo journal written yet. Remind your friends to take a second to reflect. ðŸ§˜â€â™€ï¸",onChange:e=>(e=>{E(e.target.value)})(e),value:D&&(null===(M=o[(0,f.Z)(e,"yyyy-MM-dd")])||void 0===M?void 0:M.content)!=v?"saving...":v})),n.createElement("div",{className:" items-center flex gap-2"},s==l.email&&n.createElement("button",{className:(o[(0,f.Z)(e,"yyyy-MM-dd")]?o[(0,f.Z)(e,"yyyy-MM-dd")].content==v?"bg-cpink":"bg-red-400":""==v?"bg-cpink":"bg-red-400")+" hover:bg-red-200 text-white mt-2 font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline ",onClick:()=>{return t=void 0,a=void 0,s=function*(){C(!0);const t={};for(const[e,a]of Object.entries(o)){const n=g().AES.encrypt(a.content,"helloisthisagoodkey").toString();t[e]=Object.assign(Object.assign({},a),{content:n})}const a=Object.assign(Object.assign({},t),{[(0,f.Z)(e,"yyyy-MM-dd")]:{title:(0,f.Z)(e,"EEEE, MMMM d, yyyy"),content:g().AES.encrypt(v,"helloisthisagoodkey").toString()}}),n=(0,c.qs)(r);Object.keys(a).forEach((e=>{const t=(0,c.JU)(r,"users",l.email,"journals",e);n.set(t,Object.assign({},a[e]))})),yield n.commit(),N(),C(!1)},new((n=void 0)||(n=Promise))((function(e,o){function l(e){try{c(s.next(e))}catch(e){o(e)}}function r(e){try{c(s.throw(e))}catch(e){o(e)}}function c(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n((function(e){e(a)}))).then(l,r)}c((s=s.apply(t,a||[])).next())}));var t,a,n,s}},"Save Journal"),k&&n.createElement("div",{onClick:()=>{t(!1)},className:"bg-cpink hover:bg-red-200 text-white mt-2 font-bold py-2.5 px-4 rounded focus:outline-none focus:shadow-outline "},n.createElement(i.jcU,{size:12}))))},x=({currentDay:e,setTodosData:t,todosData:a,user:o,db:l,selectedMember:r,setSelectedMember:s,code:c,setCode:m,members:d,setMembers:u,groupExists:y,setGroupExists:p,loading:g,setLoading:h})=>{var x;const[b,v]=(0,n.useState)(1),[E,w]=(0,n.useState)(!1),[N,k]=(0,n.useState)("mins"),[j,M]=(0,n.useState)("mins"),S=(0,n.useRef)(null),D=(0,n.useRef)(null),C=(n,o,l,r)=>{const s=Object.assign({},a);if(l){const t=D.current.value;s[(0,f.Z)(e,"yyyy-MM-dd")][b].actualTime=n.target.value,s[(0,f.Z)(e,"yyyy-MM-dd")][b].acctimeFormat=t}else s[(0,f.Z)(e,"yyyy-MM-dd")][b].acctimeFormat=r;t(s),"Enter"===n.key&&""!==n.target.value.trim()&&w(!1)},J=(n,o,l,r,s)=>{const c=Object.assign({},a);if(r){const t=S.current.value;c[(0,f.Z)(e,"yyyy-MM-dd")][l].plannedTime=n.target.value.trim(),c[(0,f.Z)(e,"yyyy-MM-dd")][l].timeFormat=t}else c[(0,f.Z)(e,"yyyy-MM-dd")][l].timeFormat=s;t(c)};return n.createElement("div",{className:"flex pb-12 flex-col"},c&&y&&n.createElement("div",null,n.createElement("div",{className:"flex items-center my-2"},n.createElement("label",{htmlFor:"group-member-select",className:"w-32 mr-2"},"Intentions for:"),n.createElement("select",{id:"group-member-select",ref:S,onChange:e=>{s(e.target.value)},className:"p-2 w-full rounded border border-gray-200 outline-none"},n.createElement("option",{value:o.email},"meee!"),d.map((e=>{if(e.showTodos)return n.createElement("option",{key:e.email,value:e.email},e.name)})))),n.createElement("hr",{className:"py-2"})),r==o.email&&n.createElement("input",{type:"text",placeholder:"Add a new to do item...",onKeyPress:n=>{if("Enter"===n.key&&""!==n.target.value.trim()){const o={text:n.target.value.trim(),plannedTime:"",actualTime:"",completed:!1,date:(0,f.Z)(e,"yyyy-MM-dd")},l=a[(0,f.Z)(e,"yyyy-MM-dd")]||[];t(Object.assign(Object.assign({},a),{[(0,f.Z)(e,"yyyy-MM-dd")]:[...l,o]})),n.target.value=""}},className:" p-2 w-80 rounded border border-gray-200 outline-none"}),(null===(x=a[(0,f.Z)(e,"yyyy-MM-dd")])||void 0===x?void 0:x.length)<1||!a[(0,f.Z)(e,"yyyy-MM-dd")]&&n.createElement("div",{className:"mt-2"},r!=o.email?"No to-dos written yet. Remind your friends to take a second to set intentions. âœ…":"No to-dos written yet. Take a second to set intentions! âœ…"),n.createElement("ul",{className:"my-2  "},a&&a[(0,f.Z)(e,"yyyy-MM-dd")]&&a[(0,f.Z)(e,"yyyy-MM-dd")].map(((l,s)=>n.createElement("li",{key:s,className:"flex items-center space-y-1 py-1 space-x-2 w-80"},n.createElement("div",{className:"flex items-center w-[250px]"},n.createElement("input",{type:"checkbox",disabled:r!=o.email,checked:l.completed,onChange:n=>((n,o,l)=>{const r=Object.assign({},a);r[(0,f.Z)(e,"yyyy-MM-dd")][l].completed=n.target.checked,v(l),n.target.checked&&w(!0),t(r)})(n,0,s),className:"mr-2"}),n.createElement("span",{className:l.completed?"line-through":""},l.text.length>50?`${l.text.slice(0,45)}...${l.text.slice(-2)}`:l.text)),l.completed&&n.createElement("div",{className:"bg-white rounded-lg flex flex-col place-self-end w-[160px] text-right justify-end items-end"},n.createElement("span",{className:"text-[10px] w-full flex text-right justify-end items-end text-gray-400 place-self-end"},"Planned time:"," ",l.plannedTime?`${l.plannedTime}${l.timeFormat}`:"n/a"),n.createElement("span",{className:"text-[10px] w-full text-right justify-end items-end flex text-blue-500 place-self-end"},"Actual time:"," ",l.actualTime?`${l.actualTime}${l.acctimeFormat}`:"n/a")),!l.completed&&n.createElement("div",{className:"flex items-end"},n.createElement("input",{disabled:r!=o.email,type:"text",placeholder:"Planned time",value:l.plannedTime,onChange:e=>J(e,0,s,!0,null),onKeyPress:e=>{const t=e.which?e.which:e.keyCode;t>31&&(t<48||t>57)&&e.preventDefault()},className:"p-1 text-xs rounded-l w-[85px] border border-gray-400 outline-none placeholder:text-xs justify-end"}),n.createElement("select",{disabled:r!=o.email,className:"p-1 rounded-r max-w-[60px] border-y border-r border-gray-400 outline-none text-xs",value:a[(0,f.Z)(e,"yyyy-MM-dd")][s].timeFormat?a[(0,f.Z)(e,"yyyy-MM-dd")][s].timeFormat:"mins",ref:S,onChange:e=>{J(e,0,s,!1,e.target.value?e.target.value:"mins")}},n.createElement("option",{value:"hrs"},"hrs"),n.createElement("option",{value:"mins"},"mins"))),r==o.email&&n.createElement(i.Xm5,{className:"text-cpink text-lg cursor-pointer",onClick:()=>(n=>{const o=Object.assign({},a);o[(0,f.Z)(e,"yyyy-MM-dd")].splice(n,1),t(o)})(s)}))))),E&&n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",style:{zIndex:9999},onClick:e=>{e.target===e.currentTarget&&w(!1)}},n.createElement("div",{className:"bg-white  rounded-lg p-4 "},n.createElement("h1",{className:"p-1"},"You're crushing your day!! ðŸ¥³ðŸŽ‰ðŸŽŠ"),n.createElement("div",{className:"flex items-end"},n.createElement("input",{type:"text",placeholder:"Actual time",value:a[(0,f.Z)(e,"yyyy-MM-dd")][b].actualTime,onChange:e=>C(e,0,!0,null),onKeyPress:e=>{const t=e.which?e.which:e.keyCode;t>31&&(t<48||t>57)&&e.preventDefault()},className:"p-1 text-xs rounded-l border placeholder:text-xs border-gray-400 outline-none justify-end "}),n.createElement("select",{className:"p-1 rounded-r max-w-[60px] border-y border-r border-gray-400 outline-none text-xs",value:a[(0,f.Z)(e,"yyyy-MM-dd")][b].acctimeFormat?a[(0,f.Z)(e,"yyyy-MM-dd")][b].acctimeFormat:"mins",ref:D,onChange:e=>{C(e,0,!1,e.target.value?e.target.value:"mins")}},n.createElement("option",{value:"hrs"},"hrs"),n.createElement("option",{value:"mins"},"mins"))))))};var b=function(e,t,a,n){return new(a||(a=Promise))((function(o,l){function r(e){try{c(n.next(e))}catch(e){l(e)}}function s(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,s)}c((n=n.apply(e,t||[])).next())}))};const v=({user:e,db:t,access:a,setAccess:o,password:l,setPassword:r,setUsePassword:s})=>{const[i,m]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),[y,f]=(0,n.useState)(!1);(0,n.useEffect)((()=>{b(void 0,void 0,void 0,(function*(){const a=(0,c.JU)(t,"users",e.email),n=yield(0,c.QT)(a);if(n.exists()){const e=!!n.data().hashedJournalPassword;e||f(!0),u(e)}}))}),[]);const p=a=>b(void 0,void 0,void 0,(function*(){m(!0);const n=(0,c.JU)(t,"users",e.email),l=yield(0,c.QT)(n);l.exists()&&(l.data().hashedJournalPassword===g().SHA256(a).toString(g().enc.Hex)?(h(),o(!0)):(h(),alert("Incorrect password. Please try again."))),m(!1)})),h=()=>{r("")};return n.createElement("div",{className:"mt-4 flex justify-center"},y&&n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",style:{zIndex:9999},onClick:e=>{e.target===e.currentTarget&&f(!1)}},n.createElement("div",{className:"bg-white mx-2 rounded-lg p-4 "},n.createElement("h1",null,"Hey! MoodSpace is a safe place to journal your thoughts, and reflect on your day. â¤ï¸",n.createElement("br",null),n.createElement("br",null),n.createElement("span",{className:"underline"},"If you want an extra layer of privacy you can set a password so no siblings or friends snoop in on your dearest thoughts. ðŸ˜±")," ","This also adds an extra layer of encryption.",n.createElement("br",null),n.createElement("br",null),"You can opt out if you want to avoid re-entering a password each time and your data will still be safe with us.",n.createElement("br",null),n.createElement("br",null),"You can change preferences and opt in/out anytime in settings."))),i&&n.createElement("div",{className:"absolute top-0 left-0 w-full h-full flex justify-center items-center bg-white opacity-75 z-10"},n.createElement("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-gray-900"})),n.createElement("div",{className:"flex mt-4 flex-col w-60 h-70 "},n.createElement("input",{className:"text-lg w-full text-center b-2 rounded-lg border-2 border-gray-200",placeholder:d?"Enter your password":"Choose a 5 digit password",value:l&&l}),n.createElement("div",{className:"mt-4 ml-2 w-60 h-50 "},n.createElement("div",{className:"grid gap-5 grid-cols-3 grid-rows-3 h-full"},["1","2","3","4","5","6","7","8","9","clear","0"," "].map((o=>n.createElement("div",{key:o,className:`flex w-12  h-12 justify-center items-center ${a?"bg-green-500":"bg-gray-200 hover:bg-gray-300"} rounded-full border-2 border-gray-300 font-bold text-gray-600`,onClick:()=>{var a;"clear"!=(a=o)?(r((e=>e+a)),4===l.length&&(d?p(l+a):(a=>{b(void 0,void 0,void 0,(function*(){const n=g().SHA256(a).toString(g().enc.Hex),o=(0,c.JU)(t,"users",e.email);yield(0,c.pl)(o,{hashedJournalPassword:n},{merge:!0}),u(!0),r(""),p(a)}))})(l+a))):h()}},o))))),n.createElement("div",null,!d&&n.createElement("button",{onClick:()=>b(void 0,void 0,void 0,(function*(){const a=(0,c.JU)(t,"users",e.email);yield(0,c.pl)(a,{usePassword:!1},{merge:!0}),s(!1)})),className:"mt-4 w-full place-self-center hover:bg-red-200 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline bg-cpink "},"Opt out"))))},E=({currentDay:e,setJournalByDay:t,journalByDay:a,user:o,db:l,selectedMember:r,setSelectedMember:s,code:c,setCode:i,members:m,setMembers:d,groupExists:u,setGroupExists:y,loading:f,journalInput:p,setJournalInput:g,setLoading:x,getjournaldata:b,access:E,setAccess:w,password:N,setPassword:k,setUsePassword:j,usePassword:M})=>n.createElement("div",null,E?n.createElement(h,{currentDay:e,setJournalByDay:t,journalByDay:a,user:o,db:l,selectedMember:r,setSelectedMember:s,code:c,setCode:i,members:m,setMembers:d,groupExists:u,setGroupExists:y,loading:f,setLoading:x,journalInput:p,setJournalInput:g,getjournaldata:b,access:E,setAccess:w,usePassword:M}):n.createElement(v,{user:o,db:l,access:E,setAccess:w,password:N,setPassword:k,setUsePassword:j}));var w=function(e,t,a,n){return new(a||(a=Promise))((function(o,l){function r(e){try{c(n.next(e))}catch(e){l(e)}}function s(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,s)}c((n=n.apply(e,t||[])).next())}))};const N=({db:e,user:t,usePassword:a,setUsePassword:o})=>{const[l,r]=(0,n.useState)(new Date),[s,i]=(0,n.useState)(!1),[m,d]=(0,n.useState)(""),[u,y]=(0,n.useState)({}),[p,b]=(0,n.useState)({}),[v,N]=(0,n.useState)(!1),[k,j]=(0,n.useState)(t.email),[M,S]=(0,n.useState)(""),[D,C]=(0,n.useState)([]),[J,P]=(0,n.useState)(!1),[T,$]=(0,n.useState)(!0),[O,U]=(0,n.useState)(u[(0,f.Z)(l,"yyyy-MM-dd")]?u[(0,f.Z)(l,"yyyy-MM-dd")].content:"");(0,n.useEffect)((()=>{U(u[(0,f.Z)(l,"yyyy-MM-dd")]?u[(0,f.Z)(l,"yyyy-MM-dd")].content:"")}),[l]),(0,n.useEffect)((()=>{w(void 0,void 0,void 0,(function*(){const a=(0,c.JU)(e,"users",t.email),n=yield(0,c.QT)(a);let l=[];if(n.exists()){const a=n.data().group,r=null==n.data().usePassword||n.data().usePassword;if(o(r),a){S(a),P(!0);const n=(0,c.JU)(e,"groups",a),o=yield(0,c.QT)(n);if(o.exists()){const a=o.data().members.filter((e=>e!==t.email));for(const t of a){const a=(0,c.JU)(e,"users",t),n=yield(0,c.QT)(a);if(n.exists()){const e=n.data().name,a=n.data().shareTodos,o=n.data().shareJournals;l.push({name:e,email:t,showTodos:a,showJournals:o})}else console.log("error finding member")}C(l),$(!1)}}}}))}),[]),(0,n.useEffect)((()=>{B(),w(void 0,void 0,void 0,(function*(){const t=(0,c.hJ)(e,"users",k,"todos");return(0,c.cf)(t,(e=>{const t={};e.forEach((e=>{const a=e.id,n=e.data().date;t[a]=n})),b(t)}))}))}),[k]);const B=()=>w(void 0,void 0,void 0,(function*(){const t=(0,c.hJ)(e,"users",k,"journals");return(0,c.cf)(t,(e=>{const t={};e.forEach((e=>{const a=e.id,n=g().AES.decrypt(e.data().content,"helloisthisagoodkey").toString(g().enc.Utf8),o={title:e.data().title,content:n};t[a]=o})),y(t);const a=t[(0,f.Z)(l,"yyyy-MM-dd")]?t[(0,f.Z)(l,"yyyy-MM-dd")].content:"";U(a)}))}));return(0,n.useEffect)((()=>{k==t.email&&w(void 0,void 0,void 0,(function*(){try{const a=(0,c.qs)(e);Object.keys(p).forEach((n=>{const o=(0,c.JU)(e,"users",t.email,"todos",n);a.set(o,{date:p[n]})})),yield a.commit()}catch(e){console.error("Error adding documents: ",e)}}))}),[p]),n.createElement("div",{className:"justify-center font-serif pb-4 w-80 h-[475px]"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("h2",{className:"text-2xl font-medium font-serif "},v?"Brain Dump":"To-dos"),n.createElement("div",null,n.createElement("button",{className:"bg-teel rounded-full px-3 py-1 mr-2 text-white hover:bg-opacity-80 transition-colors",onClick:()=>{r((e=>{const t=new Date(e);return t.setDate(t.getDate()-1),t})),U(u[(0,f.Z)(l,"yyyy-MM-dd")]?u[(0,f.Z)(l,"yyyy-MM-dd")].content:"")}},"<"),n.createElement("button",{className:"bg-teel rounded-full px-3 py-1 text-white hover:bg-opacity-80 transition-colors",onClick:()=>{r((e=>{const t=new Date(e);return t.setDate(t.getDate()+1),t})),U(u[(0,f.Z)(l,"yyyy-MM-dd")]?u[(0,f.Z)(l,"yyyy-MM-dd")].content:"")}},">"))),n.createElement("div",{className:" flex mt-1 justify-between"},n.createElement("h2",{className:"text-md font-bold text-gray-800 mb-2"},(0,f.Z)(l,"EEEE, MMMM d, yyyy")),n.createElement("div",{className:"border border-cpink h-8 rounded-lg flex max-w-[150px]"},n.createElement("button",{className:(v?"bg-white text-cpink":"bg-cpink text-white")+" rounded-l-md flex w-full items-center px-2 justify-center transition-colors duration-300",onClick:()=>N(!1)},n.createElement("span",null,"Todos")),n.createElement("button",{className:(v?"bg-cpink text-white":"bg-white text-cpink")+" rounded-r-md flex items-center w-full  px-2 justify-center transition-colors duration-300",onClick:()=>N(!0)},n.createElement("span",null,"Journal")))),v?a?n.createElement("div",{className:"my-4 w-80 "},n.createElement(E,{currentDay:l,setJournalByDay:y,journalByDay:u,user:t,db:e,selectedMember:k,setSelectedMember:j,code:M,setCode:S,members:D,setMembers:C,groupExists:J,setGroupExists:P,loading:T,setLoading:$,journalInput:O,setJournalInput:U,getjournaldata:B,access:s,setAccess:i,password:m,setPassword:d,usePassword:a,setUsePassword:o})):n.createElement(h,{currentDay:l,setJournalByDay:y,journalByDay:u,user:t,db:e,selectedMember:k,setSelectedMember:j,code:M,setCode:S,members:D,setMembers:C,groupExists:J,setGroupExists:P,loading:T,setLoading:$,journalInput:O,setJournalInput:U,getjournaldata:B,access:s,setAccess:i,usePassword:a}):n.createElement("div",{className:"my-4 w-80 "},n.createElement(x,{currentDay:l,setTodosData:b,todosData:p,user:t,db:e,selectedMember:k,setSelectedMember:j,code:M,setCode:S,members:D,setMembers:C,groupExists:J,setGroupExists:P,loading:T,setLoading:$})))};var k=a(3744),j=a(4195),M=a(3023),S=a(5358),D=a(9307),C=a(6880);const J=[{emoji:"ðŸ¤©",text:"ahhh",color:"blue",count:4},{emoji:"ðŸ˜Š",text:"nicee",color:"green",count:3},{emoji:"ðŸ˜",text:"okey",color:"orange",count:2},{emoji:"ðŸ˜”",text:"bummy",color:"red",count:1},{emoji:"ðŸ˜£",text:"rotten",color:"black",count:0}],P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],T=({data:e})=>{const t=(e=>{const t=[],a=new Date,n=a.getFullYear(),o=a.getMonth(),l=new Date(n,o+1,0).getDate();for(let a=1;a<=l;a++){const l=`${n}-${o+1}-${a}`,r=e[l]?e[l]:"ðŸ˜";let s=0;for(let e=0;e<J.length;e++)if(J[e].emoji===r){s=J[e].count;break}t.push({date:a,mood:5*s})}return t})(e);return n.createElement("div",null,n.createElement("h2",{className:"text-md mt-2 font-bold mb-4"},"Monthly Mood-o-Meter"),n.createElement(k.w,{width:325,height:250,data:t,margin:{top:5,right:20,bottom:5,left:-30}},n.createElement(j.q,{strokeDasharray:"3 3"}),n.createElement(M.K,{dataKey:"date",tickFormatter:e=>e.toString(),label:{value:P[(new Date).getMonth()],position:"bottom",offset:-8}}),n.createElement(S.B,{dataKey:"mood",tickFormatter:e=>["ðŸ˜£","ðŸ˜”","ðŸ˜","ðŸ˜Š","ðŸ¤©"][e/5],domain:[0,20],tick:{fontSize:16}}),n.createElement(D.u,null),n.createElement(C.x,{type:"monotone",dataKey:"mood",stroke:"#8884d8",activeDot:{r:8},dot:{r:4},strokeWidth:2})))},$=({moodByDayData:e,activitiesByDay:t})=>{const[a,o]=(0,n.useState)(null),[l,r]=(0,n.useState)([]);return(0,n.useEffect)((()=>{if(a){const n=(a=>{const n={};return Object.entries(e).forEach((([e,o])=>{o===a&&(t[e]||[]).forEach((e=>{n[e]=(n[e]||0)+1}))})),n})(a),o=Object.entries(n).sort(((e,t)=>t[1]-e[1])).map((([e,t])=>({activity:e,count:t})));r(o)}else r([])}),[a]),n.createElement("div",{className:"w-80 "},n.createElement("div",{className:"relative justify-between flex place-items-center items-center mb-4"},n.createElement("h2",{className:"text-md mt-2 font-bold mb-4"},"Activity Correlations"),n.createElement("div",{className:"relative"},n.createElement("select",{className:"appearance-none border min-w-[150px] w-full border-gray-300 rounded-lg py-2 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-400",value:a||"",onChange:e=>{return t=e.target.value,void o(t);var t}},n.createElement("option",{value:""},"Select a Mood... "),[{emoji:"ðŸ¤©",text:"ahhh",color:"blue-900"},{emoji:"ðŸ˜Š",text:"nicee",color:"blue-500"},{emoji:"ðŸ˜",text:"okey",color:"teal-500"},{emoji:"ðŸ˜”",text:"bummy",color:"orange-500"},{emoji:"ðŸ˜£",text:"rotten",color:"red-500"}].map((({emoji:e,text:t,color:a})=>n.createElement("option",{className:"flex gap-2 items-center",key:e,value:e},`${e} ${t}`)))))),a&&(null==l?void 0:l.length)>0?n.createElement("ul",{className:"flex justify-center items-center flex-wrap w-full"},l.map((({activity:e,count:t})=>n.createElement("li",{key:e,className:"mb-2"},n.createElement("div",{className:"w-auto mx-2 justify-center h-6 m-1 py-1 px-2 text-xs rounded-full bg-teel text-white relative"},e,n.createElement("span",{className:"absolute -top-2 -right-2 w-3 h-3 rounded-full bg-white p-2 border-gray-400 border-[1px] text-teel flex justify-center items-center text-xs font-bold"},t)))))):n.createElement("p",null,"Please select an emotion to see associated activities."))};const O=({db:e,user:t})=>{const[a,o]=(0,n.useState)({}),[l,r]=(0,n.useState)({});return(0,n.useEffect)((()=>{const a=(0,c.hJ)(e,"users",t.email,"moodByDay");return(0,c.cf)(a,(e=>{const t={};e.forEach((e=>{const a=e.id,n=e.data();t[a]=n.emoji})),o(t)}))}),[t,e]),(0,n.useEffect)((()=>{var a,n,o,l;a=void 0,n=void 0,l=function*(){const a=(0,c.JU)(e,"users",t.email),n=yield(0,c.QT)(a);if(n.exists()){const e=n.data().moodReasons;e&&r(e)}else console.log("No such document!")},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{c(l.next(e))}catch(e){t(e)}}function s(e){try{c(l.throw(e))}catch(e){t(e)}}function c(t){var a;t.done?e(t.value):(a=t.value,a instanceof o?a:new o((function(e){e(a)}))).then(r,s)}c((l=l.apply(a,n||[])).next())}))}),[]),n.createElement("div",{className:"flex w-80 flex-col gap-4 mb-12  "},n.createElement("h2",{className:"text-2xl flex flex-col font-medium font-serif flex-start justify-start w-full text-left"},"Emojinal Intelligence",n.createElement("span",{className:"text-sm font-bold"},"Your Mood Stats and Streaks!")),n.createElement(T,{data:a}),n.createElement($,{moodByDayData:a,activitiesByDay:l}),n.createElement("div",{className:"mb-12 text-white "},"."),n.createElement("div",{className:"mb-12 text-white "},"."))};var U=a(471),B=a(3750),A=function(e,t,a,n){return new(a||(a=Promise))((function(o,l){function r(e){try{c(n.next(e))}catch(e){l(e)}}function s(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,s)}c((n=n.apply(e,t||[])).next())}))};const F=({db:e,user:t,setShowPopup:a})=>{const[o,l]=(0,n.useState)(""),[r,s]=(0,n.useState)(""),[i,m]=(0,n.useState)([]),[d,u]=(0,n.useState)(""),[y,f]=(0,n.useState)(!1),[p,g]=(0,n.useState)(!0),[h,x]=(0,n.useState)(!1),[b,v]=(0,n.useState)(!1),[E,w]=(0,n.useState)(!1),[N,k]=(0,n.useState)(!1),j=()=>A(void 0,void 0,void 0,(function*(){const a=(0,c.JU)(e,"users",t.email),n=yield(0,c.QT)(a);let o=[];if(n.exists()){const a=n.data().group;if(w(n.data().shareTodos),k(n.data().shareJournals),a){l(a),f(!0);const n=(0,c.JU)(e,"groups",a),r=yield(0,c.QT)(n);if(r.exists()){const a=r.data().members.filter((e=>e!==t.email));for(const t of a){const a=(0,c.JU)(e,"users",t),n=yield(0,c.QT)(a);if(n.exists()){const e=n.data().name,a=n.data().photo;o.push({name:e,email:t,photo:a})}else console.log("error finding member")}m(o),g(!1)}}}}));(0,n.useEffect)((()=>{j()}),[e,t]);return n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",style:{zIndex:9999},onClick:e=>{e.target===e.currentTarget&&a(!1)}},n.createElement("div",{className:"bg-white w-[350px] h-auto rounded-lg pt-4 px-4 flex  "},n.createElement("div",{className:"flex w-80 mt-2 h-full items-center pb-8 flex-col gap-4 "},n.createElement("h2",{className:"text-2xl flex flex-col font-medium font-serif flex-start justify-start w-full text-left"},"Accountabilibuddies!",n.createElement("span",{className:"text-sm font-bold"},"Join one to hold your friends accountable")),y?n.createElement("div",{className:" px-4"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement("p",{className:"text-md font-medium mb-2"},"Group Code:"),n.createElement("input",{type:"text",value:o,readOnly:!0,className:"bg-gray-100  px-3 py-2 rounded-md mb-2"})),n.createElement("p",{className:"text-xs text-gray-500 mb-4"},"^Share this code with others to join the group."),n.createElement("div",{className:"flex py-2 gap-2"},n.createElement("label",{htmlFor:"todo"},"Share my to-dos"),n.createElement("input",{onChange:a=>{var n;n=a.target.checked,A(void 0,void 0,void 0,(function*(){const a=(0,c.JU)(e,"users",t.email);yield(0,c.r7)(a,{shareTodos:n}),j()}))},type:"checkbox",name:"todo",value:"todo",checked:E}),n.createElement("label",{htmlFor:"journal"},"Share my journals"),n.createElement("input",{onChange:a=>{var n;n=a.target.checked,A(void 0,void 0,void 0,(function*(){const a=(0,c.JU)(e,"users",t.email);yield(0,c.r7)(a,{shareJournals:n}),j()}))},type:"checkbox",name:"journal",value:"journal",checked:N})),i.length?n.createElement("div",null,n.createElement("p",{className:"text-md flex gap-4 font-medium mb-2"},"Members:"),n.createElement("div",{className:"flex w-[320px] justify-center flex-row overflow-scroll gap-4"},n.createElement("div",{className:"flex flex-col items-center justify-center",key:"me"},n.createElement("img",{className:"w-12 h-12 rounded-full ",src:t.photoURL}),n.createElement("p",{className:"text-sm text-center text-gray-500 mb-1"},"meee!!")),i.map((e=>n.createElement("div",{className:"flex flex-col items-center justify-center",key:e.email},n.createElement("img",{className:"w-12 h-12 rounded-full ",src:e.photo}),n.createElement("p",{key:e.email,className:"text-sm text-center text-gray-500 mb-1"},e.name)))))):n.createElement("p",{className:"text-md text-teal-500 font-medium mb-4"},"Waiting for members to join..."),d&&n.createElement("p",{className:"text-red-500"},d)):n.createElement("div",{className:"flex flex-col"},n.createElement("div",null,n.createElement("h1",{className:"text-md mb-6"},"Enter a name to create, or enter a code to join a group"),n.createElement("div",{className:"flex flex-col space-y-4"},n.createElement("div",{className:"flex items-center space-x-4"},n.createElement("input",{type:"text",value:r,onChange:e=>{s(e.target.value)},placeholder:"Group Name",className:"flex-grow px-4 py-2 w-full text-gray-700 border border-gray-400 rounded-lg focus:outline-none focus:border-cpink"}),n.createElement("button",{onClick:()=>A(void 0,void 0,void 0,(function*(){const a=(0,c.hJ)(e,"groups"),n=(()=>{let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let a=0;a<6;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e})();yield(0,c.pl)((0,c.JU)(a,n),{groupName:r,createdAt:(0,c.Bt)(),members:[t.email]});const o=(0,c.JU)(e,"users",t.email);yield(0,c.r7)(o,{group:n}),l(n),f(!0)})),disabled:!r,className:(r?"bg-red-400":"bg-cpink")+" hover:bg-cpink px-4 rounded-lg py-2 w-52 font-medium text-white "},"Create Group")),n.createElement("div",{className:"flex items-center space-x-4"},n.createElement("input",{type:"text",value:o,onChange:e=>{l(e.target.value)},placeholder:"Enter Code",className:"flex-grow px-4 py-2 w-full text-gray-700 border border-gray-400 rounded-lg focus:outline-none focus:border-cpink"}),n.createElement("button",{onClick:()=>A(void 0,void 0,void 0,(function*(){const a=(0,c.hJ)(e,"groups");if((yield(0,c.QT)((0,c.JU)(a,o))).exists()){yield(0,c.r7)((0,c.JU)(a,o),{members:(0,c.vr)(t.email)}),f(!0);const n=(0,c.JU)(e,"users",t.email);yield(0,c.r7)(n,{group:o}),j()}else u("Invalid code, please try again.")})),disabled:!o,className:(o?"bg-red-400":"bg-cpink")+" hover:bg-cpink px-4 rounded-lg py-2 w-52  font-medium text-white "},"Join Group"))))),y&&n.createElement("button",{onClick:()=>A(void 0,void 0,void 0,(function*(){try{const a=(0,c.JU)(e,"groups",o),n=yield(0,c.QT)(a);if(n.exists()&&i.length>0){const o=n.data().members.filter((e=>e!==t.email));yield(0,c.r7)(a,{members:o});const l=(0,c.JU)(e,"users",t.email);yield(0,c.r7)(l,{group:null})}else yield(0,c.oe)(a);m([]),f(!1),l("")}catch(e){console.log("Error leaving group:",e)}})),className:"place-self-start flex items-center gap-2  bg-red-500 text-white rounded p-2"},n.createElement("span",null,n.createElement(B.And,null)),"Leave Group"))))};const Z=({db:e,user:t,setShowPopup:a})=>{const[o,l]=(0,n.useState)("");return n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",style:{zIndex:9999},onClick:e=>{e.target===e.currentTarget&&a(!1)}},n.createElement("div",{className:"bg-white w-auto h-auto rounded-lg pt-4 px-4 flex"},n.createElement("div",{className:"flex w-60 mt-2 h-full items-center pb-8 flex-col gap-4"},n.createElement("div",{className:"flex justify-center items-center gap-4"},n.createElement("button",{className:"flex items-center justify-center gap-4 ",onClick:()=>{return a=void 0,n=void 0,r=function*(){const a=(0,c.hJ)(e,"users",t.email,"todos"),n=(0,c.hJ)(e,"users",t.email,"moodByDay"),o=(0,c.hJ)(e,"users",t.email,"journals"),r=(0,c.JU)(e,"users",t.email),[s,i,m,d]=yield Promise.all([(0,c.PL)(a),(0,c.PL)(n),(0,c.PL)(o),(0,c.QT)(r)]),u={todos:s.docs.map((e=>e.data())),moodByDay:i.docs.reduce(((e,t)=>(e[t.id]=t.data(),e)),{}),journals:m.docs.reduce(((e,t)=>(e[t.id]=t.data(),e)),{}),moodReasons:d.data().moodReasons};let y="";Object.keys(u.todos).length>0&&(y+="Todos\n",y+="Date,Text\n",Object.keys(u.todos).forEach((e=>{u.todos[e].date.forEach((e=>{y+=`${e.date},${e.text}\n`}))})),y+="\n"),Object.keys(u.moodByDay).length>0&&(y+="Mood By Day\n",y+="Date, Emoji\n",Object.keys(u.moodByDay).forEach((e=>{const t=u.moodByDay[e];y+=`${e},${t.emoji}\n`})),y+="\n"),Object.keys(u.journals).length>0&&(y+="Journals\n",y+="Date,Content\n",Object.keys(u.journals).forEach((e=>{const t=u.journals[e];y+=`${e},${t.content}\n`})),y+="\n"),u.moodReasons&&(y+="Mood Reasons\n",y+="Date,Reasons\n",Object.keys(u.moodReasons).forEach((e=>{y+=`${e},"${u.moodReasons[e].join(", ")}"\n`})),y+="\n");const f="data:text/csv;charset=utf-8,"+encodeURIComponent(y);l(f)},new((o=void 0)||(o=Promise))((function(e,t){function l(e){try{c(r.next(e))}catch(e){t(e)}}function s(e){try{c(r.throw(e))}catch(e){t(e)}}function c(t){var a;t.done?e(t.value):(a=t.value,a instanceof o?a:new o((function(e){e(a)}))).then(l,s)}c((r=r.apply(a,n||[])).next())}));var a,n,o,r}},n.createElement(B.QNI,null),"Prepare Data for Export")),o&&n.createElement("a",{className:"bg-teel rounded-md text-white p-2 ",href:o,download:"myData.csv"},"Download"))))};var I=function(e,t,a,n){return new(a||(a=Promise))((function(o,l){function r(e){try{c(n.next(e))}catch(e){l(e)}}function s(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,s)}c((n=n.apply(e,t||[])).next())}))};const R=function({user:e,auth:t,db:a,usePassword:o,setUsePassword:l}){const[r,s]=(0,n.useState)(!1),[i,m]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),y=()=>I(this,void 0,void 0,(function*(){const t=(0,c.JU)(a,"users",e.email);yield(0,c.pl)(t,{usePassword:!o,hashedJournalPassword:null},{merge:!0}),l(!o)}));(0,n.useEffect)((()=>{f()}),[]);const f=()=>I(this,void 0,void 0,(function*(){const t=(0,c.JU)(a,"users",e.email),n=yield(0,c.QT)(t);if(n.exists()){const e=null==n.data().usePassword||n.data().usePassword;l(e)}}));return n.createElement("div",{className:"w-full p-4 flex items-center justify-between"},n.createElement("h1",{className:"text-sm font-medium font-serif "},"MoodSpace"),n.createElement("div",{className:"relative mr-4"},n.createElement(B.b4S,{className:"text-sm cursor-pointer",onClick:()=>s(!r)}),r&&n.createElement("div",{className:"absolute right-2 mt-2 py-2 w-48 bg-white rounded-lg shadow-xl z-10"},n.createElement("div",{className:"px-4 py-2 font-medium text-gray-800"},"Signed in as: ",e.email),n.createElement("div",{onClick:()=>{m(!0),s(!1)},className:"hover:text-teel cursor-pointer px-4 py-2 font-medium text-gray-800"},"Accountability Groups"),n.createElement("div",{onClick:()=>{y()},className:"hover:text-teel cursor-pointer px-4 py-2 font-medium text-gray-800"},"Opt ",o?"out of":"in for"," journal lock"),n.createElement("div",{onClick:()=>{u(!0),s(!1)},className:"hover:text-teel cursor-pointer px-4 py-2 font-medium text-gray-800"},"Export Data"),n.createElement("div",{className:"py-2 border-t border-gray-300"},n.createElement("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",onClick:()=>{chrome.identity.getAuthToken({interactive:!0},(e=>{chrome.runtime.lastError?console.error(chrome.runtime.lastError):e?chrome.identity.removeCachedAuthToken({token:e},(()=>{t.signOut().then((()=>{})).catch((e=>{console.error("Error signing out: ",e)}))})):t.signOut().then((()=>{})).catch((e=>{console.error("Error signing out: ",e)}))}))}},"Logout")))),i&&n.createElement(F,{user:e,db:a,setShowPopup:m}),d&&n.createElement(Z,{user:e,db:a,setShowPopup:u}))};var G=a(6485),L=function(e,t,a,n){return new(a||(a=Promise))((function(o,l){function r(e){try{c(n.next(e))}catch(e){l(e)}}function s(e){try{c(n.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(r,s)}c((n=n.apply(e,t||[])).next())}))};const Q=({db:e,user:t})=>{const[a,o]=(0,n.useState)(""),[l,r]=(0,n.useState)(n.createElement("div",null,n.createElement("h1",null,"Welcome to chat!",n.createElement("br",null),n.createElement("br",null),n.createElement("span",{className:"underline"},"At MoodSpace we're here for you and we want to help you reach your goals. ðŸŽ¯")," ",n.createElement("br",null),n.createElement("br",null),"Everyones goals are different, from getting better grades, to learning a new hobby to just being happier. Wherever you are in life the MoodSpace coach wants to help.",n.createElement("br",null),n.createElement("br",null),"Break down obstacles, discuss feelings and set actionable goals here!"),n.createElement("div",{className:"w-full justify-center flex items-center place-items-center"},n.createElement("button",{onClick:()=>{u(!1)},className:"px-4 place-self-center py-2 bg-teel text-white rounded-lg"},"Start!")))),[s,m]=(0,n.useState)([]),[d,u]=(0,n.useState)(!0),[y,f]=(0,n.useState)(""),[p,g]=(0,n.useState)();let h,x,b=0;const[v,E]=(0,n.useState)([]),w=()=>L(void 0,void 0,void 0,(function*(){const a=(0,c.JU)(e,"users",t.email),n=yield(0,c.QT)(a),o=function(){const e=new Date;return`${e.getFullYear()}-${(e.getMonth()+1).toString()}-${e.getDate().toString()}`}();if(n.exists()){const e=n.data();return x={name:e.name,moodReasons:e.moodReasons[o]},E(e.moodReasons[o]),g(x),console.log(o),console.log(x),m([{content:`Hi ${x.name}, how can I help you today! ðŸš€ options: [Set a goal, Reflect on my day, Get some inspiration, Talk, Therapy]`,role:"assistant"}]),x}console.log("no user info")})),[N,k]=(0,n.useState)("");(0,n.useEffect)((()=>{L(void 0,void 0,void 0,(function*(){const t=(0,c.JU)(e,"message","chatMessage"),a=(yield(0,c.QT)(t)).data().text;k(a||"")})),w().then((e=>{g(e),x=e}))}),[]);const j=new G.Configuration({apiKey:"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"}),M=new G.OpenAIApi(j),S=e=>L(void 0,void 0,void 0,(function*(){const t={content:e,role:"user"};try{const a=yield M.createChatCompletion({model:"gpt-3.5-turbo",temperature:.4,max_tokens:75,top_p:1,messages:[{role:"system",content:"you are an ai personal coach your job is to 1.)guide the user through setting SMART goals,  2.)guide the user thought CBT to address mental health and wellness concerns."},{role:"system",content:"lead the user thought things like Cognitive Restructuring, distorted thinking, Behavioral Activation, Graded Exposure, Problem-Solving, Thought Record, Relaxation Techniques, Goal Setting, Self-Monitoring"},{role:"system",content:"never give the user answers instead end each response you write with a list of short potential responses for the user to pick from. guide them by asking the right questions and end like this options:[]"},{role:"system",content:"if setting a goal before the convo ends say your SMART goal is: and write out their smart goal"},{role:"assistant",content:`hi, i'm your ai personal coach. whats your name ðŸ¤”. options: [${p.name}ðŸ¤©, your mom ðŸ˜‚, ðŸ¤·ðŸ¼â€â™€ï¸]`},{role:"user",content:`${p.name}`},{role:"assistant",content:"nice to meet you ðŸ‘‹ how are you. options: [good ðŸ‘, great, amazinnnng ðŸ˜‡]"},{role:"user",content:`amazinnnng i did ${v}`},{role:"user",content:`be short and consise, i do not like a lot of writing at once, be funny, end with Good luck! when youre done helping. start the convo talking about ${v} and dont give me more than 4 options max to choose from in options: `},...s,{role:"user",content:e}]});o(""),h=[];const n={content:a.data.choices[0].message.content,role:"assistant"};m([...s,t,n])}catch(e){console.error(e),u(!0),r(n.createElement("h1",null,"Hey sorry... gimme a second to think. Trying to brainstorm the best way to help you! ðŸ§",n.createElement("br",null)))}}));return n.createElement("div",{className:"h-screen mx-auto item-center justify-center w-full pb-12 p-4"},d&&n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 w-full flex items-center justify-center",style:{zIndex:9999},onClick:e=>{e.target===e.currentTarget&&u(!1)}},n.createElement("div",{className:"bg-white w-full mx-2 rounded-lg p-4 "},l)),N?n.createElement("div",{className:"p-2 mb-4 bg-teel bg-opacity-40  rounded-lg"},N):n.createElement("div",{className:"flex flex-col flex-grow pb-52 overflow-y-auto"},s.map(((e,t)=>n.createElement("div",{key:t,className:"flex mb-2 "+("user"===e.role?"justify-end":"justify-start")},n.createElement("div",{className:"bg-gray-200 py-1 px-3 rounded-lg "+("user"===e.role?"bg-blue-500 text-white":"")},e.content.includes("options: ")?n.createElement("div",null,(()=>{const t=e.content.indexOf("["),a=e.content.indexOf("]",t);b=a-t;const n=e.content.slice(t+1,a);return h=n.split(", "),b>75?h.pop():b<5&&(h=[]),e.content.slice(0,t-9)})()):e.content)))),n.createElement("div",{className:"flex flex-col items-center px-10 w-full place-self-center fixed bottom-10 left-0  p-4 bg-white"},n.createElement("div",{className:"flex w-full place-self-center flex-wrap text-center items-center "},h&&h.length>0&&h.map(((e,t)=>n.createElement("button",{key:t,className:"inline-block px-2 py-1 mr-2 mb-2 bg-blue-500 text-white rounded-lg",onClick:()=>{console.log(e),o(e),S(e)}},e)))),n.createElement("div",{className:"w-full flex place-self-center items-center"},n.createElement("input",{type:"text",placeholder:"Type your message here...",value:a,onChange:e=>o(e.target.value),onKeyPress:e=>{var t;t=a,"Enter"===e.key&&S(t)},className:"flex-grow py-2 px-4 mr-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500"}),n.createElement("button",{onClick:()=>{S(a)},className:"px-4 py-2 bg-blue-500 text-white rounded-lg"},"Send"),n.createElement("button",{className:"inline-block px-2 py-2 ml-2 text-[16px]  bg-red-500 text-white rounded-lg",onClick:()=>{w(),u(!0),r(n.createElement("div",null,n.createElement("h1",null,"Welcome to chat!",n.createElement("br",null),n.createElement("br",null),n.createElement("span",{className:"underline"},"At MoodSpace we're here for you and we want to help you reach your goals. ðŸŽ¯")," ",n.createElement("br",null),n.createElement("br",null),"Everyones goals are different, from getting better grades, to learning a new hobby to just being happier. Wherever you are in life the MoodSpace coach wants to help.",n.createElement("br",null),n.createElement("br",null),"Break down obstacles, discuss feelings and set actionable goals here!"),n.createElement("div",{className:"w-full justify-center flex items-center place-items-center"},n.createElement("button",{onClick:()=>{u(!1)},className:"px-4 place-self-center py-2 bg-teel text-white rounded-lg"},"Start!"))))}},n.createElement(i.O18,{width:12}))))))},z=function({user:e,auth:t,db:a}){const[o,l]=(0,n.useState)(!0),r=[{name:"Calendar",icon:n.createElement(i.IiJ,null),component:n.createElement(y,{db:a,user:e})},{name:"Reflect",icon:n.createElement(i.l_A,null),component:n.createElement(N,{db:a,user:e,usePassword:o,setUsePassword:l})},{name:"Analytics",icon:n.createElement(i.NMh,null),component:n.createElement(O,{db:a,user:e})},{name:"Coach",icon:n.createElement(U.qGB,null),component:n.createElement(Q,{db:a,user:e})}],[s,c]=(0,n.useState)(r[0]);return n.createElement("div",{className:"flex w-full flex-col overflow-scroll h-[600px]"},n.createElement(R,{user:e,auth:t,db:a,usePassword:o,setUsePassword:l}),n.createElement("hr",null),n.createElement("div",{className:"flex p-8 min-h-[450px]"},s.component),n.createElement("div",{className:"w-full flex overflow-y-auto  justify-center items-center bg-teel text-white p-2 fixed bottom-0"},r.map((e=>n.createElement("button",{key:e.name,className:"flex flex-col items-center mr-4 "+(s.name===e.name?"text-white":"text-gray-300"),onClick:()=>(e=>{c(e)})(e)},e.icon,n.createElement("span",null,e.name)))),n.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.buymeacoffee.com/vinaya",className:"flex  flex-col items-center mr-4 hover:text-white\n          text-gray-300\n            "},n.createElement(i.EKJ,null),n.createElement("span",null,"Coffee"))))};const W=({user:e,db:t,setFirstTime:a})=>{const[o,l]=n.useState(""),[r,s]=n.useState(""),[i,m]=n.useState("productivity"),[d,u]=n.useState(""),[y,f]=n.useState(!1);return n.createElement("div",{className:"flex flex-col justify-center items-center"},n.createElement("div",{className:" flex mt-8 gap-2"},n.createElement("img",{src:"logo128x128.png",alt:"MoodSpace logo",className:"w-10 mb-2"}),n.createElement("h1",{className:"text-xl font-serif font-bold"},"Welcome to MoodSpace")),n.createElement("form",{className:"flex flex-wrap gap-4 pb-4 px-4",onSubmit:n=>{return l=void 0,s=void 0,u=function*(){n.preventDefault(),f(!0);let l="other"==i?d:i;try{const n={name:o,age:r,photo:e.photoURL,reason:l};yield(0,c.pl)((0,c.JU)(t,"users",e.email),n)}catch(e){console.error("Error writing user data to Firestore:",e)}finally{f(!1),a(!1)}},new((m=void 0)||(m=Promise))((function(e,t){function a(e){try{o(u.next(e))}catch(e){t(e)}}function n(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof m?o:new m((function(e){e(o)}))).then(a,n)}o((u=u.apply(l,s||[])).next())}));var l,s,m,u}},n.createElement("div",{className:"w-64 mb-4"},n.createElement("label",{className:"block w-full text-gray-700 font-bold mb-2",htmlFor:"email"},"Email"),n.createElement("input",{className:" w-64 border rounded-md py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",value:e.email,disabled:!0})),n.createElement("div",{className:"mb-4"},n.createElement("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"name"},"First Name"),n.createElement("input",{className:"border rounded-md  w-52 py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"name",type:"text",value:o,onChange:e=>l(e.target.value)})),n.createElement("div",{className:"mb-4"},n.createElement("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"age"},"Age"),n.createElement("input",{className:"border rounded-md py-2 px-3 max-w-[100px] text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"age",type:"number",value:r,onChange:e=>s(e.target.value)})),n.createElement("div",{className:"flex w-full  mb-4"},n.createElement("div",null,n.createElement("label",{className:"block text-gray-700 font-bold mb-2",htmlFor:"reason"},"Reason for using MoodSpace"),n.createElement("select",{className:"border min-w-[150px] rounded-md py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"reason",value:i,onChange:e=>{m(e.target.value)}},n.createElement("option",{value:"productivity"},"Productivity"),n.createElement("option",{value:"wellness"},"Wellness"),n.createElement("option",{value:"both"},"Both!"),n.createElement("option",{value:"other"},"Other"))),"other"===i&&n.createElement("div",{className:"mt-6 "},n.createElement("input",{className:"border justify-start rounded-md py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"otherReason",type:"text",placeholder:"please share why",value:d,onChange:e=>u(e.target.value)}))),n.createElement("div",{className:"flex w-full justify-center"},n.createElement("button",{type:"submit",className:"bg-teal-500 w-full hover:bg-teal-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"},"Submit"))))};const Y=(0,l.ZF)({apiKey:"AIzaSyBI1NzI4Sn3a2zOuvq9XtRylsBLeYl-GY8",authDomain:"moodspace-383910.firebaseapp.com",projectId:"moodspace-383910",storageBucket:"moodspace-383910.appspot.com",messagingSenderId:"824586914859",appId:"1:824586914859:web:a0af099ff3048822f3ee6e",measurementId:"G-NE1NCDL079"}),q=(0,r.v0)(Y),K=(0,c.ad)(Y),H=e=>{const[t,a]=n.useState(void 0),[o,l]=n.useState(!0),[s,i]=n.useState(""),[m,d]=n.useState(""),[u,y]=n.useState(""),[f,p]=n.useState(null);return n.useEffect((()=>{q.onAuthStateChanged((e=>{a(e&&e.uid?e:null)}))}),[]),void 0===t?n.createElement("h1",null,"Loading..."):null!=t?(g=void 0,h=void 0,b=function*(){const e=(0,c.JU)(K,"users",t.email);(yield(0,c.QT)(e)).exists()?p(!1):(console.log("User does not already exist:"),p(!0))},new((x=void 0)||(x=Promise))((function(e,t){function a(e){try{o(b.next(e))}catch(e){t(e)}}function n(e){try{o(b.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof x?o:new x((function(e){e(o)}))).then(a,n)}o((b=b.apply(g,h||[])).next())})),n.createElement("div",{className:"w-full h-full"},null===f?n.createElement("div",{className:"flex items-center justify-center h-full w-full"},n.createElement("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-gray-900"})):f?n.createElement(W,{user:t,db:K,setFirstTime:p}):n.createElement(z,{user:t,auth:q,db:K}))):n.createElement("div",{className:"flex place-self-center flex-col w-full 2-full place-items-center items-center justify-center h-[400px]"},n.createElement("div",{className:"flex items-center gap-2"},n.createElement("img",{src:"logo128x128.png",alt:"MoodSpace logo",className:"w-10 mb-8"}),n.createElement("h1",{className:"text-xl font-serif font-bold mb-6"},"Welcome to MoodSpace")),n.createElement("button",{className:"bg-teel w-32 h-10 text-center text-white font-bold rounded hover:bg-teal-600",onClick:e=>{e.preventDefault(),chrome.identity.getAuthToken({interactive:!0},(e=>{!chrome.runtime.lastError&&e?(0,r.sB)(q,r.hJ.credential(null,e)).then((e=>{})).catch((e=>{alert(`SSO ended with an error: ${e}`)})):alert(`SSO ended with an error: ${JSON.stringify(chrome.runtime.lastError)}`)}))}},"Sign In with Google"));var g,h,x,b},_=function(){return n.createElement("div",{className:"w-96 max-w-96 overflow-scroll flex"},n.createElement(H,null))};!function(){const e=document.createElement("div");if(document.body.appendChild(e),!e)throw new Error("Cannot find appContainer");(0,o.s)(e).render(n.createElement(_,null))}()},2480:()=>{}},a={};function n(e){var o=a[e];if(void 0!==o)return o.exports;var l=a[e]={id:e,loaded:!1,exports:{}};return t[e].call(l.exports,l,l.exports,n),l.loaded=!0,l.exports}n.m=t,e=[],n.O=(t,a,o,l)=>{if(!a){var r=1/0;for(m=0;m<e.length;m++){for(var[a,o,l]=e[m],s=!0,c=0;c<a.length;c++)(!1&l||r>=l)&&Object.keys(n.O).every((e=>n.O[e](a[c])))?a.splice(c--,1):(s=!1,l<r&&(r=l));if(s){e.splice(m--,1);var i=o();void 0!==i&&(t=i)}}return t}l=l||0;for(var m=e.length;m>0&&e[m-1][2]>l;m--)e[m]=e[m-1];e[m]=[a,o,l]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={42:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var o,l,[r,s,c]=a,i=0;if(r.some((t=>0!==e[t]))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(c)var m=c(n)}for(t&&t(a);i<r.length;i++)l=r[i],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(m)},a=self.webpackChunkmoodspace=self.webpackChunkmoodspace||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),n.nc=void 0;var o=n.O(void 0,[707,117,835],(()=>n(9864)));o=n.O(o)})();